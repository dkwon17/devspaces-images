---
platforms:
  # all these keys are optional - see https://osbs.readthedocs.io/en/latest/users.html#image-configuration for more info

  only:
  - x86_64
  - s390x
  - ppc64le

# scratch image requires no compose
# compose:
#   inherit: false
#   pulp_repos: true
#   signing_intent: release

# instead of docker_api, use imagebuilder for multistage builds
image_build_method: imagebuilder

# new for 4.5
# https://osbs.readthedocs.io/en/latest/users.html#replacing-pullspecs
operator_manifests:
  manifests_dir: manifests
  enable_digest_pinning: true
  enable_repo_replacements: true
  enable_registry_replacements: true
  repo_replacements:
    # - registry: registry-proxy.engineering.redhat.com
    #   package_mappings:
    #     devspaces-operator-container: rh-osbs/devspaces-rhel9-operator
    #     devspaces-rhel9-operator-container: rh-osbs/devspaces-rhel9-operator
    - registry: registry.redhat.io
      package_mappings:
        # devspaces-operator-container: devspaces/devspaces-rhel9-operator
        devspaces-rhel9-operator-container: devspaces/devspaces-rhel9-operator

        # 00_java11-maven-microprofile-xp3/devfile.yaml
        # 00_java11-maven-eap/devfile.yaml
        rh-mongodb36-container: registry.redhat.io/rhscl/mongodb-36-rhel7
        ubi8-minimal-container: registry.redhat.io/ubi8/ubi-minimal
        ubi8-micro-container: registry.redhat.io/ubi8/ubi-micro
        kube-rbac-proxy-container: openshift4/ose-kube-rbac-proxy
        golang-github-openshift-oauth-proxy-container: openshift4/ose-oauth-proxy
        devspaces-configbump-rhel9-container: devspaces/configbump-rhel9
        devspaces-dashboard-rhel9-container: devspaces/dashboard-rhel9
        devspaces-idea-rhel9-container: devspaces/idea-rhel9
        devspaces-imagepuller-rhel9-container: devspaces/imagepuller-rhel9
        devspaces-machineexec-rhel9-container: devspaces/machineexec-rhel9
        devspaces-pluginregistry-rhel9-container: devspaces/pluginregistry-rhel9
        devspaces-server-rhel9-container: devspaces/server-rhel9
        devspaces-traefik-rhel9-container: devspaces/traefik-rhel9
        devspaces-udi-rhel9-container: devspaces/udi-rhel9
        # DWO
        devworkspace-operator-bundle-container: devworkspace/devworkspace-operator-bundle
        devworkspace-operator-bundle-package: devworkspace/devworkspace-operator-bundle
        devworkspace-operator-package: devworkspace/devworkspace-operator-bundle
        devworkspace-operator-container: devworkspace/devworkspace-rhel8-operator
